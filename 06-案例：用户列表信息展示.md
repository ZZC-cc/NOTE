---

title: "06 æ¡ˆä¾‹ï¼šç”¨æˆ·åˆ—è¡¨ä¿¡æ¯å±•ç¤º"  
tags: ""

---

# **æ¡ˆä¾‹ï¼šç”¨æˆ·åˆ—è¡¨ä¿¡æ¯å±•ç¤º**

## 1.  éœ€æ±‚ï¼šç”¨æˆ·å¢åˆ æŸ¥æ”¹æ“ä½œ

## 2.  è®¾è®¡ï¼š

* ### 1. æŠ€æœ¯é€‰å‹ï¼š**Servlet**+**JSP**+**MYSQL**+**JDBCTempleat**+**Duird**+**BeanUtils**+**tomcat**

* ### 2. æ•°æ®åº“è®¾è®¡ï¼š

```sql
  create database userShowTest; -- åˆ›å»ºæ•°æ®åº“
  use userShowTest;             -- ä½¿ç”¨æ•°æ®åº“
  create table user(            --åˆ›å»ºè¡¨
      id int primary key auto_increment,
      name varchar(20) not null,
      gender varchar(5),
      age int,
      address varchar(32),
      qq varchar(20),
      email varchar(50)
  );
```

## 3. å¼€å‘

- ### 1. ç¯å¢ƒæ­å»º

  1. åˆ›å»ºé¡¹ç›®ç¯å¢ƒ
  2. åˆ›å»ºé¡¹ç›®ï¼Œå¯¼å…¥éœ€è¦jaråŒ…
- ### 2. ç¼–ç 

![image.png](assets/image-20211208172603-kbyhw60.png)

## **4. åŠŸèƒ½å®ç°**

## **00-é¡¹ç›®æ•´ä½“**

![image.png](assets/image-20211208170104-b8qi4xw.png)

## **01-å‡†å¤‡å·¥ä½œ** ğŸ‘‡

* ## **teat.java-æµ‹è¯•æ•°æ®åº“è¿æ¥**

  ```java
  package cn.case1;
  import java.sql.DriverManager;
  import java.sql.SQLException;

  import java.sql.Connection;


  public class test {
      public static void main(String[] args) {
          try {
              Class.forName("com.mysql.cj.jdbc.Driver");
          } catch (ClassNotFoundException e) {
              e.printStackTrace();
          }
  //        String url="jdbc:mysql://localhost:3306/day17";
          String url = "jdbc:mysql://localhost:3306/day17?useUnicode=true&characterEncoding=utf8";
          Connection connection= null;
          try {
              connection = DriverManager.getConnection(url,"root","123456");
          } catch (SQLException e) {
              e.printStackTrace();
          }
          try {
              connection.close();
          } catch (SQLException e) {
              e.printStackTrace();
          }
      }
  }
  ```

* ## **resources/druid.properties-æ•°æ®åº“é…ç½®æ–‡ä»¶**

  ```sql
  driverClassName=com.mysql.cj.jdbc.Driver
  url=jdbc:mysql:///day17?useSSL=true&characterEncoding=utf-8&serverTimezone=GMT
  username=root
  password=123456
  initialSize=5
  maxActive=20
  maxWait=3000
  ```

  * [X] **.properties**æ–‡ä»¶éœ€è¦åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª**resources**æ–‡ä»¶å¤¹æ”¾å…¥
  * [X] æ–°ç‰ˆmysqlåŒ…ä½¿ç”¨**driverClassName=com.mysql.cj.jdbc.Driver**
  * [X] urlåœ°å€åé¢å†™ä¸Šæ•°æ®åº“å+ç¼–ç ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š**url=jdbc:mysql:///day17?useSSL=true&characterEncoding=utf-8&serverTimezone=GMT**
  * [X] ç”¨æˆ·åå¯†ç éœ€è¦è¿›è¡Œç¡®è®¤
  * è¿è¡Œtest.java è‹¥æ˜¾ç¤º0åˆ™è¿æ¥æˆåŠŸï¼Œæ˜¾ç¤º-1åˆ™è¿æ¥å‡ºç°é—®é¢˜ï¼Œå¯¹æ—¥å¿—æ–‡ä»¶æç¤ºè¿›è¡Œæ’é”™![image.png](assets/image-20211208173538-v8uwk3f.png)


    [ ]

## **02-ä»£ç éƒ¨åˆ†**

* ### ğŸ—ƒï¸**dao>>>**ğŸ“**impl>>>**ğŸ“‡**UserDaoImpl**

  ```java
  package cn.case1.dao.ipml;

  import cn.case1.dao.UserDao;
  import cn.case1.domain.User;
  import cn.case1.util.JDBCUtils;
  import org.springframework.jdbc.core.BeanPropertyRowMapper;
  import org.springframework.jdbc.core.JdbcTemplate;

  import java.util.ArrayList;
  import java.util.List;
  import java.util.Map;
  import java.util.Set;

  public class UserDaoImpl implements UserDao {
      private JdbcTemplate template=new JdbcTemplate(JDBCUtils.getDataSource());
      @Override
      public List<User> findAll() {
          //ä½¿ç”¨JDBCæ“ä½œæ•°æ®åº“
          //1.å®šä¹‰sql
          String sql="select * from user";
          List<User> users = template.query(sql, new BeanPropertyRowMapper<>(User.class));
          return users;
      }

      @Override
      public User findUsernameAndPassword(String username,String password){
          try {
              String sql="select * from user where username = ? and password = ? ";
              User user=template.queryForObject(sql,new BeanPropertyRowMapper<User>(User.class),
  username,password);
              return user;
          }catch (Exception e){
              e.printStackTrace();
              return null;
          }
      }

      @Override
      public void add(User user) {
          //1.å®šä¹‰sql
          String sql="insert into user values(null,?,?,?,?,?,?,null,null)";
          //2.æ‰§è¡Œsql
          template.update(sql,user.getName(),user.getGender(),user.getAge(),user.getAddress(),
  user.getQq(),user.getEmail());
      }

      @Override
      public void delete(int id) {
          //1.å®šä¹‰sql
          String sql="delete from user where id = ?";
          //2.æ‰§è¡Œsql
          template.update(sql,id);
      }

      @Override
      public User findById(int id) {
          //1.å®šä¹‰sql
          String sql="select * from user where id= ?";
          return template.queryForObject(sql,new BeanPropertyRowMapper<User>(User.class),id);
      }

      @Override
      public void update(User user) {
         //1.å®šä¹‰sql
         String sql=
  "update user set name = ?,gender = ? ,age = ? ,address = ? ,qq = ?,email = ? where id = ?";
         template.update(sql,user.getName(),user.getGender(),user.getAge(),user.getAddress(),
  user.getQq(),user.getEmail(),user.getId());
      }

      @Override
      public List<User> findByPage(int start, int rows, Map<String, String[]> condition) {
          String sql="select * from user where 1 = 1 ";
          StringBuffer sb=new StringBuffer(sql);
          //2.éå†map
          Set<String> keySet = condition.keySet();
          //å®šä¹‰å‚æ•°é›†åˆ
          List<Object> params=new ArrayList<Object>();
          for (String key:keySet) {
              //æ’é™¤åˆ†é¡µæ¡ä»¶å‚æ•°
              if("currentPage".equals(key)||"rows".equals(key)){
                  continue;
              }
              //è·å–value
              String value = condition.get(key)[0];
              //åˆ¤æ–­valueæ˜¯å¦æœ‰å€¼
              if(value !=null && !"".equals(value)){
                  //æœ‰å€¼
                  sb.append(" and "+key+" like ?");
                  params.add("%"+value+"%");//?æ¡ä»¶çš„å€¼
              }
          }
          //æ·»åŠ åˆ†é¡µæŸ¥è¯¢
          sb.append(" limit ?,? ");
          //æ·»åŠ åˆ†é¡µå‚æ•°
          params.add(start);
          params.add(rows);

          sql=sb.toString();
          System.out.println(sql);
          System.out.println(params);
          return template.query(sql,new BeanPropertyRowMapper<User>(User.class),params.toArray());
      }

      @Override
      public int findTotalCount(Map<String, String[]> condition) {
          //1.å®šä¹‰æ¨¡æ¿åˆå§‹åŒ–sql
          String sql="select count(*) from user where 1 = 1 ";
          StringBuffer sb=new StringBuffer(sql);
          //2.éå†map
          Set<String> keySet = condition.keySet();
          //å®šä¹‰å‚æ•°é›†åˆ
          List<Object> params=new ArrayList<Object>();
          for (String key:keySet) {
              //æ’é™¤åˆ†é¡µæ¡ä»¶å‚æ•°
              if("currentPage".equals(key)||"rows".equals(key)){
                  continue;
              }
              //è·å–value
              String value = condition.get(key)[0];
              //åˆ¤æ–­valueæ˜¯å¦æœ‰å€¼
              if(value !=null && !"".equals(value)){
                  //æœ‰å€¼
                  sb.append(" and "+key+" like ?");
                  params.add("%"+value+"%");//?æ¡ä»¶çš„å€¼
              }
          }
          System.out.println(sb.toString());
          System.out.println(params);

          return template.queryForObject(sb.toString(),Integer.class,params.toArray());
      }
  }
  ```
* ### ğŸ—ƒï¸dao>>>ğŸ“‡UserDao

  ```java
  package cn.case1.dao;

  import cn.case1.domain.User;

  import java.util.List;
  import java.util.Map;

  /*
  *ç”¨æˆ·åˆ›ä½œçš„DAO
  * */
  public interface UserDao {

      public List<User> findAll();

      User findUsernameAndPassword(String username, String password);

      void add(User user);

      void delete(int id);

      User findById(int id);

      void update(User user);
  //æŸ¥è¯¢æ€»è®°å½•æ•°
      List<User> findByPage(int start, int rows, Map<String, String[]> condition);
  //åˆ†é¡µæŸ¥è¯¢
      int findTotalCount(Map<String, String[]> condition);
  }
  ```

* ## ğŸ—ƒï¸domain>>>ğŸ“‡PageBean/

  ```java
  package cn.case1.domain;

  import java.util.List;

  //åˆ†é¡µå¯¹è±¡
  public class PageBean<T> {
      private int totalCount;//æ€»è®°å½•æ•°
      private int totalPage;//æ€»é¡µç æ•°
      private List<T> list;//æ¯é¡µçš„æ•°æ®
      private int currentPage;//å½“å‰é¡µç 
      private int rows;//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°

      @Override
      public String toString() {
          return "PageBean{" +
                  "totalCount=" + totalCount +
                  ", totalPage=" + totalPage +
                  ", list=" + list +
                  ", currentPage=" + currentPage +
                  ", rows=" + rows +
                  '}';
      }

      public int getTotalCount() {
          return totalCount;
      }

      public void setTotalCount(int totalCount) {
          this.totalCount = totalCount;
      }

      public int getTotalPage() {
          return totalPage;
      }

      public void setTotalPage(int totalPage) {
          this.totalPage = totalPage;
      }

      public List<T> getList() {
          return list;
      }

      public void setList(List<T> list) {
          this.list = list;
      }

      public int getCurrentPage() {
          return currentPage;
      }

      public void setCurrentPage(int currentPage) {
          this.currentPage = currentPage;
      }

      public int getRows() {
          return rows;
      }

      public void setRows(int rows) {
          this.rows = rows;
      }
  }
  ```

* ## ğŸ—ƒï¸domain>>>ğŸ“‡User

  ```java
  package cn.case1.domain;

  public class User {
      private int id;
      private String name;
      private String gender;
      private int age;
      private String address;
      private String qq;
      private String email;
      private String username;
      private String password;

      public String getUsername() {
          return username;
      }

      public void setUsername(String username) {
          this.username = username;
      }

      public String getPassword() {
          return password;
      }

      public void setPassword(String password) {
          this.password = password;
      }

      @Override
      public String toString() {
          return "User{" +
                  "id=" + id +
                  ", name='" + name + '\'' +
                  ", gender='" + gender + '\'' +
                  ", age=" + age +
                  ", address='" + address + '\'' +
                  ", qq='" + qq + '\'' +
                  ", email='" + email + '\'' +
                  ", username='" + username + '\'' +
                  ", password='" + password + '\'' +
                  '}';
      }

      public int getId() {
          return id;
      }

      public void setId(int id) {
          this.id = id;
      }

      public String getName() {
          return name;
      }

      public void setName(String name) {
          this.name = name;
      }

      public String getGender() {
          return gender;
      }

      public void setGender(String gender) {
          this.gender = gender;
      }

      public int getAge() {
          return age;
      }

      public void setAge(int age) {
          this.age = age;
      }

      public String getAddress() {
          return address;
      }

      public void setAddress(String address) {
          this.address = address;
      }

      public String getQq() {
          return qq;
      }

      public void setQq(String qq) {
          this.qq = qq;
      }

      public String getEmail() {
          return email;
      }

      public void setEmail(String email) {
          this.email = email;
      }
  }
  ```

* ## ğŸ—ƒï¸service>>>ğŸ“Impl>>>ğŸ“‡UserServiceImpl

  ```java
  package cn.case1.service.ipml;

  import cn.case1.dao.UserDao;
  import cn.case1.dao.ipml.UserDaoImpl;
  import cn.case1.domain.PageBean;
  import cn.case1.domain.User;
  import cn.case1.service.UserService;

  import java.util.List;
  import java.util.Map;

  public class UserServiceImpl implements UserService {
      private UserDao dao=new UserDaoImpl();
      @Override
      public List<User> findAll() {
          //è°ƒç”¨Daoå®ŒæˆæŸ¥è¯¢
          return dao.findAll();
      }

      @Override
      public User login(User user){
          return dao. findUsernameAndPassword(user.getUsername(),user.getPassword());
      }

      @Override
      public void addUser(User user) {
          dao.add(user);
      }

      @Override
      public void deleteUser(String id) {
          dao.delete(Integer.parseInt(id));
      }

      @Override
      public User findUserById(String id) {
          return dao.findById(Integer.parseInt(id));
      }

      @Override
      public void updateUser(User user) {
          dao.update(user);
      }

      @Override
      public void delSelectedUser(String[] ids) {
          if(ids != null && ids.length > 0){
              //1.éå†æ•°ç»„
              for (String id : ids) {
                  //2.è°ƒç”¨daoåˆ é™¤
                  dao.delete(Integer.parseInt(id));
              }
          }
      }

      @Override
      public PageBean<User> findUserByPage(String _currentPage, String _rows, Map<String, String[]> condition) {
          int currentPage=Integer.parseInt(_currentPage);
          int rows=Integer.parseInt(_rows);
          if (currentPage<=0){
              currentPage=1;
          }
          //1.åˆ›å»ºç©ºçš„PageBeanå¯¹è±¡
          PageBean<User> pb=new PageBean<User>();
          //2.è®¾ç½®å‚æ•°
          pb.setCurrentPage(currentPage);
          pb.setRows(rows);
          //3.è°ƒç”¨daoæŸ¥è¯¢æ€»è®°å½•æ•°
          int totalCount=dao.findTotalCount(condition);
          pb.setTotalCount(totalCount);
          //4.è°ƒç”¨daoæŸ¥è¯¢Listé›†åˆ
          //è®¡ç®—ä¸€ä¸‹å¼€å§‹çš„è®°å½•ç´¢å¼•
          int start=(currentPage - 1)*rows;
          List<User> list=dao.findByPage(start,rows,condition);
          pb.setList(list);
          //5.è®¡ç®—æ€»é¡µç 
          int totalPage=(totalCount%rows )== 0 ? totalCount/rows : (totalCount/rows )+ 1;
          pb.setTotalPage(totalPage);
          return pb;
      }

  }
  ```

* ## ğŸ—ƒï¸service>>>ğŸ“‡UserService

  ```java
  package cn.case1.service;

  import cn.case1.domain.PageBean;
  import cn.case1.domain.User;

  import java.util.List;
  import java.util.Map;

  /*
  * ç”¨æˆ·ç®¡ç†çš„ä¸šåŠ¡æ¥å£
  * */
  public interface UserService {
      /*
      * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
      * @return
      * */
      public List<User> findAll();

      /**
       * ç™»å½•æ–¹æ³•
       * @param user
       * @return
       */
      User login(User user);
      /**
       * ä¿å­˜å¯¹è±¡
       * @param user
       *
       */
      void addUser(User user);
      /**
       * æ ¹æ®idåˆ é™¤User
       * @param id
       *
       */
      void deleteUser(String id);
      /**
       * æ ¹æ®idæŸ¥è¯¢User
       * @param id
       *
       * @return
       */
      User findUserById(String id);
      /**
       * ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
       * @param user
       * @return
       */
      void updateUser(User user);
      /**
       * æ‰¹é‡åˆ é™¤ç”¨æˆ·
       * @param ids
       */
      void delSelectedUser(String[] ids);



      /**
       * åˆ†é¡µæ¡ä»¶æŸ¥è¯¢
       * @param _currentPage
       * @param _rows
       * @param condition
       * @return
       */
      PageBean<User> findUserByPage(String _currentPage, String _rows, Map<String, String[]> condition);
  }
  ```

* ## ğŸ—ƒï¸util>>>ğŸ“‡JDBCUtils

  ```java
  package cn.case1.util;

  import com.alibaba.druid.pool.DruidDataSourceFactory;

  import javax.sql.DataSource;
  import java.io.IOException;
  import java.io.InputStream;
  import java.sql.Connection;
  import java.sql.SQLException;
  import java.util.Properties;

  /**
   * JDBCå·¥å…·ç±» ä½¿ç”¨Duridè¿æ¥æ± 
   */
  public class JDBCUtils {

      private static DataSource ds ;

      static {

          try {
              //1.åŠ è½½é…ç½®æ–‡ä»¶
              Properties pro = new Properties();
              //ä½¿ç”¨ClassLoaderåŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å–å­—èŠ‚è¾“å…¥æµ
              InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream("druid.properties");
              pro.load(is);

              //2.åˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡
              ds = DruidDataSourceFactory.createDataSource(pro);

          } catch (IOException e) {
              e.printStackTrace();
          } catch (Exception e) {
              e.printStackTrace();
          }
      }

      /**
       * è·å–è¿æ¥æ± å¯¹è±¡
       */
      public static DataSource getDataSource(){
          return ds;
      }


      /**
       * è·å–è¿æ¥Connectionå¯¹è±¡
       */
      public static Connection getConnection() throws SQLException {
          return  ds.getConnection();
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡AddUserServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.User;

  import cn.case1.service.ipml.UserServiceImpl;
  import org.apache.commons.beanutils.BeanUtils;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;
  import java.lang.reflect.InvocationTargetException;
  import java.util.Map;

  @WebServlet("/addUserServlet")
  public class AddUserServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //1.è®¾ç½®ç¼–ç 
          req.setCharacterEncoding("utf-8");
          //2.è·å–å‚æ•°
          Map<String, String[]> map = req.getParameterMap();
          //3.å°è£…å¯¹è±¡
          User user = new User();
          try {
              BeanUtils.populate(user,map);
          } catch (IllegalAccessException e) {
              e.printStackTrace();
          } catch (InvocationTargetException e) {
              e.printStackTrace();
          }
          //4.è°ƒç”¨Serviceä¿å­˜
          UserServiceImpl userService = new UserServiceImpl();
          userService.addUser(user);
          //5.è·³è½¬åˆ°userListServlet
          resp.sendRedirect(req.getContextPath()+"/userListServlet");
      }

      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡CheckCodeServlet/

  ```java
  package cn.case1.web.servlet;

  import java.awt.Color;
  import java.awt.Font;
  import java.awt.Graphics;
  import java.awt.image.BufferedImage;
  import java.io.IOException;
  import java.util.Random;
  import javax.imageio.ImageIO;
  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;

  /**
   * éªŒè¯ç 
   */
  @WebServlet("/checkCodeServlet")
  public class CheckCodeServlet extends HttpServlet {
  	public void doGet(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {

  		//æœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨ä¸è¦ç¼“å­˜
  		response.setHeader("pragma","no-cache");
  		response.setHeader("cache-control","no-cache");
  		response.setHeader("expires","0");

  		//åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªé•¿80ï¼Œå®½30çš„å›¾ç‰‡ï¼Œé»˜è®¤é»‘è‰²èƒŒæ™¯
  		//å‚æ•°ä¸€ï¼šé•¿
  		//å‚æ•°äºŒï¼šå®½
  		//å‚æ•°ä¸‰ï¼šé¢œè‰²
  		int width = 80;
  		int height = 30;
  		BufferedImage image = new BufferedImage(width,height,BufferedImage.TYPE_INT_RGB);

  		//è·å–ç”»ç¬”
  		Graphics g = image.getGraphics();
  		//è®¾ç½®ç”»ç¬”é¢œè‰²ä¸ºç°è‰²
  		g.setColor(Color.GRAY);
  		//å¡«å……å›¾ç‰‡
  		g.fillRect(0,0, width,height);

  		//äº§ç”Ÿ4ä¸ªéšæœºéªŒè¯ç ï¼Œ12Ey
  		String checkCode = getCheckCode();
  		//å°†éªŒè¯ç æ”¾å…¥HttpSessionä¸­
  		request.getSession().setAttribute("CHECKCODE_SERVER",checkCode);

  		//è®¾ç½®ç”»ç¬”é¢œè‰²ä¸ºé»„è‰²
  		g.setColor(Color.YELLOW);
  		//è®¾ç½®å­—ä½“çš„å°å¤§
  		g.setFont(new Font("é»‘ä½“",Font.BOLD,24));
  		//å‘å›¾ç‰‡ä¸Šå†™å…¥éªŒè¯ç 
  		g.drawString(checkCode,15,25);

  		//å°†å†…å­˜ä¸­çš„å›¾ç‰‡è¾“å‡ºåˆ°æµè§ˆå™¨
  		//å‚æ•°ä¸€ï¼šå›¾ç‰‡å¯¹è±¡
  		//å‚æ•°äºŒï¼šå›¾ç‰‡çš„æ ¼å¼ï¼Œå¦‚PNG,JPG,GIF
  		//å‚æ•°ä¸‰ï¼šå›¾ç‰‡è¾“å‡ºåˆ°å“ªé‡Œå»
  		ImageIO.write(image,"PNG",response.getOutputStream());
  	}
  	/**
  	 * äº§ç”Ÿ4ä½éšæœºå­—ç¬¦ä¸² 
  	 */
  	private String getCheckCode() {
  		String base = "0123456789ABCDEFGabcdefg";
  		int size = base.length();
  		Random r = new Random();
  		StringBuffer sb = new StringBuffer();
  		for(int i=1;i<=4;i++){
  			//äº§ç”Ÿ0åˆ°size-1çš„éšæœºå€¼
  			int index = r.nextInt(size);
  			//åœ¨baseå­—ç¬¦ä¸²ä¸­è·å–ä¸‹æ ‡ä¸ºindexçš„å­—ç¬¦
  			char c = base.charAt(index);
  			//å°†cæ”¾å…¥åˆ°StringBufferä¸­å»
  			sb.append(c);
  		}
  		return sb.toString();
  	}
  	public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  		this.doGet(request,response);
  	}
  }



  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡DelSelectedServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.service.UserService;
  import cn.case1.service.ipml.UserServiceImpl;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;
  @WebServlet("/delSelectedServlet")
  public class DelSelectedServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //1.è·å–æ‰€æœ‰id
          String[] ids = req.getParameterValues("uid");
          //2.è°ƒç”¨serviceåˆ é™¤
          UserService service = new UserServiceImpl();
          service.delSelectedUser(ids);

          //3.è·³è½¬æŸ¥è¯¢æ‰€æœ‰Servlet
          resp.sendRedirect(req.getContextPath()+"/findUserByPageServlet");
      }

      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡DelUserServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.service.UserService;
  import cn.case1.service.ipml.UserServiceImpl;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;

  @WebServlet("/delUserServlet")
  public class DelUserServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //1.è·å–id
          String id = req.getParameter("id");
          //2.è°ƒç”¨serviceåˆ é™¤
          UserService service = new UserServiceImpl();
          service.deleteUser(id);

          //3.è·³è½¬åˆ°æŸ¥è¯¢æ‰€æœ‰Servlet
          resp.sendRedirect(req.getContextPath()+"/findUserByPageServlet");
      }

      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡FindUserByPageServle

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.PageBean;
  import cn.case1.domain.User;
  import cn.case1.service.ipml.UserServiceImpl;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;
  import java.util.Map;

  @WebServlet("/findUserByPageServlet")
  public class FindUserByPageServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          req.setCharacterEncoding("utf-8");

          //1.è·å–å‚æ•°
          String currentPage = req.getParameter("currentPage");//å½“å‰é¡µç 
          String rows = req.getParameter("rows");//æ˜¾ç¤ºæ¡æ•°
          if(currentPage == null||"".equals(currentPage)){
              currentPage="1";
          }
          if(rows == null||"".equals(rows)){
              rows="5";
          }
          //è·å–æ¡ä»¶æŸ¥è¯¢å‚æ•°
          Map<String, String[]> condition = req.getParameterMap();

          //2.è°ƒç”¨serviceæŸ¥è¯¢
          UserServiceImpl userService = new UserServiceImpl();
          PageBean<User> pb= userService.findUserByPage(currentPage,rows,condition);
          //3.å°†PageBeanå­˜å…¥request
          req.setAttribute("pb",pb);
          req.setAttribute("condition",condition);//å°†æŸ¥è¯¢æ¡ä»¶ä¹Ÿå­˜å…¥
          //4.è½¬å‘åˆ°list.jsp
          req.getRequestDispatcher("/list.jsp").forward(req,resp);
      }


      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡FindUserServletServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.User;
  import cn.case1.service.ipml.UserServiceImpl;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;

  @WebServlet("/findUserServlet")
  public class FindUserServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //1.è·å–id
          String id=req.getParameter("id");
          //2.è°ƒç”¨ServiceæŸ¥è¯¢
          UserServiceImpl userService = new UserServiceImpl();
          User user=userService.findUserById(id);
          //3.å°†userå­˜å…¥request
          req.setAttribute("user",user);
          //4.è½¬å‘åˆ°updata.jsp
          req.getRequestDispatcher("/update.jsp").forward(req,resp);
      }

      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡LoginServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.User;
  import cn.case1.service.UserService;
  import cn.case1.service.ipml.UserServiceImpl;
  import com.mchange.v2.codegen.bean.BeangenUtils;
  import org.apache.commons.beanutils.BeanUtils;

  import javax.servlet.*;
  import javax.servlet.http.*;
  import javax.servlet.annotation.*;
  import java.io.IOException;
  import java.lang.reflect.InvocationTargetException;
  import java.util.Map;

  @WebServlet("/loginServlet")
  public class LoginServlet extends HttpServlet {
      @Override
      protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          //1.è®¾ç½®ç¼–ç 
          request.setCharacterEncoding("utf-8");

          //2.è·å–æ•°æ®
          //2.1è·å–ç”¨æˆ·å¡«å†™éªŒè¯ç 
          String verifycode = request.getParameter("verifycode");
          Map<String, String[]> map = request.getParameterMap();

          //3.éªŒè¯ç æ ¡éªŒ
          HttpSession session = request.getSession();
          String checkcode_server = (String) session.getAttribute("CHECKCODE_SERVER");
          session.removeAttribute("CHECKCODE_SERVER");//ç¡®ä¿éªŒè¯ç ä¸€æ¬¡æ€§
          if (!checkcode_server.equalsIgnoreCase(verifycode)){
              //éªŒè¯ç ä¸æ­£ç¡®
              //æç¤ºä¿¡æ¯
              request.setAttribute("login_msg","éªŒè¯ç é”™è¯¯ï¼");
              //è·³è½¬ç™»é™†ç•Œé¢
              request.getRequestDispatcher("/login.jsp").forward(request,response);
              return;
          }

          //4.å°è£…Userå¯¹è±¡
          User user=new User();
          try {
              BeanUtils.populate(user,map);
          } catch (IllegalAccessException e) {
              e.printStackTrace();
          } catch (InvocationTargetException e) {
              e.printStackTrace();
          }

          //5.è°ƒç”¨ServiceæŸ¥è¯¢
          UserService userService=new UserServiceImpl();
          User loginUser=userService.login(user);
          //6.åˆ¤æ–­æ˜¯å¦ç™»é™†æˆåŠŸ
          if (loginUser != null){
              //ç™»é™†æˆåŠŸ
              //å°†ç”¨æˆ·å­˜å…¥session
              session.setAttribute("user",loginUser);
              //è·³è½¬é¡µé¢
              response.sendRedirect(request.getContextPath()+"/index.jsp");
          }else {
              //ç™»é™†å¤±è´¥
              //æç¤ºä¿¡æ¯
              request.setAttribute("login_msg","ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼");
              //è·³è½¬ç™»é™†ç•Œé¢
              request.getRequestDispatcher("/login.jsp").forward(request,response);
          }
      }

      @Override
      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          this.doGet(request, response);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡UpdateUserServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.User;
  import cn.case1.service.ipml.UserServiceImpl;
  import org.apache.commons.beanutils.BeanUtils;

  import javax.servlet.ServletException;
  import javax.servlet.annotation.WebServlet;
  import javax.servlet.http.HttpServlet;
  import javax.servlet.http.HttpServletRequest;
  import javax.servlet.http.HttpServletResponse;
  import java.io.IOException;
  import java.lang.reflect.InvocationTargetException;
  import java.util.Map;

  @WebServlet("/updateUserServlet")
  public class UpdateUserServlet extends HttpServlet {
      @Override
      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          //1.è®¾ç½®ç¼–ç 
          req.setCharacterEncoding("utf-8");
          //2.è·å–map
          Map<String, String[]> map = req.getParameterMap();
          //3.å°è£…å¯¹è±¡
          User user = new User();
          try {
              BeanUtils.populate(user,map);
          } catch (IllegalAccessException e) {
              e.printStackTrace();
          } catch (InvocationTargetException e) {
              e.printStackTrace();
          }
          //4.è°ƒç”¨Serviceä¿®æ”¹
          UserServiceImpl userService = new UserServiceImpl();
          userService.updateUser(user);
          //5.è½¬åˆ°æŸ¥è¯¢æ‰€æœ‰Servlet
          resp.sendRedirect(req.getContextPath()+"/userListServlet");
      }

      @Override
      protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
          this.doPost(req, resp);
      }
  }
  ```

* ## ğŸ—ƒï¸web>>>ğŸ“servlet>>>ğŸ“‡UserListServlet

  ```java
  package cn.case1.web.servlet;

  import cn.case1.domain.User;
  import cn.case1.service.UserService;
  import cn.case1.service.ipml.UserServiceImpl;

  import javax.servlet.*;
  import javax.servlet.http.*;
  import javax.servlet.annotation.*;
  import java.io.IOException;
  import java.util.List;

  @WebServlet("/userListServlet")
  public class UserListServlet extends HttpServlet {
      @Override
      protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          //1.è°ƒç”¨UserServiceå®ŒæˆæŸ¥è¯¢
          UserService service=new UserServiceImpl();
          List<User> users = service.findAll();
          //2.å°†listå­˜å…¥requeståŸŸ
          request.setAttribute("users",users);
          //3.è½¬å‘åˆ°list.jsp
          request.getRequestDispatcher("/list.jsp").forward(request,response);
      }

      @Override
      protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          this.doGet(request, response);
      }
  }
  ```

* ## ğŸŒweb>>>ğŸ—‚ï¸WEB-INF>>>ğŸ“‚lib

  ![image.png](assets/image-20211208233306-bk8sggc.png)

* ## ğŸŒweb>>>ğŸ“‘add.jsp

  ```html
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <!-- HTML5æ–‡æ¡£-->
  <!DOCTYPE html>
  <!-- ç½‘é¡µä½¿ç”¨çš„è¯­è¨€ -->
  <html lang="zh-CN">
  <head>
      <!-- æŒ‡å®šå­—ç¬¦é›† -->
      <meta charset="utf-8">
      <!-- ä½¿ç”¨Edgeæœ€æ–°çš„æµè§ˆå™¨çš„æ¸²æŸ“æ–¹å¼ -->
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- viewportè§†å£ï¼šç½‘é¡µå¯ä»¥æ ¹æ®è®¾ç½®çš„å®½åº¦è‡ªåŠ¨è¿›è¡Œé€‚é…ï¼Œåœ¨æµè§ˆå™¨çš„å†…éƒ¨è™šæ‹Ÿä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨çš„å®½åº¦ä¸è®¾å¤‡çš„å®½åº¦ç›¸åŒã€‚
      width: é»˜è®¤å®½åº¦ä¸è®¾å¤‡çš„å®½åº¦ç›¸åŒ
      initial-scale: åˆå§‹çš„ç¼©æ”¾æ¯”ï¼Œä¸º1:1 -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- ä¸Šè¿°3ä¸ªmetaæ ‡ç­¾*å¿…é¡»*æ”¾åœ¨æœ€å‰é¢ï¼Œä»»ä½•å…¶ä»–å†…å®¹éƒ½*å¿…é¡»*è·Ÿéšå…¶åï¼ -->
      <title>æ·»åŠ ç”¨æˆ·</title>

      <!-- 1. å¯¼å…¥CSSçš„å…¨å±€æ ·å¼ -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <!-- 2. jQueryå¯¼å…¥ï¼Œå»ºè®®ä½¿ç”¨1.9ä»¥ä¸Šçš„ç‰ˆæœ¬ -->
      <script src="js/jquery-2.1.0.min.js"></script>
      <!-- 3. å¯¼å…¥bootstrapçš„jsæ–‡ä»¶ -->
      <script src="js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="container">
      <center><h3>æ·»åŠ è”ç³»äººé¡µé¢</h3></center>
      <form action="${pageContext.request.contextPath}/addUserServlet" method="post">
          <div class="form-group">
              <label for="name">å§“åï¼š</label>
              <input type="text" class="form-control" id="name" name="name" placeholder="è¯·è¾“å…¥å§“å">
          </div>

          <div class="form-group">
              <label>æ€§åˆ«ï¼š</label>
              <input type="radio" name="gender" value="ç”·" checked="checked"/>ç”·
              <input type="radio" name="gender" value="å¥³"/>å¥³
          </div>

          <div class="form-group">
              <label for="age">å¹´é¾„ï¼š</label>
              <input type="text" class="form-control" id="age" name="age" placeholder="è¯·è¾“å…¥å¹´é¾„">
          </div>

          <div class="form-group">
              <label for="address">ç±è´¯ï¼š</label>
              <select name="address" class="form-control" id="jiguan">
                  <option value="å¹¿ä¸œ">å¹¿ä¸œ</option>
                  <option value="å¹¿è¥¿">å¹¿è¥¿</option>
                  <option value="æ¹–å—">æ¹–å—</option>
              </select>
          </div>

          <div class="form-group">
              <label for="qq">QQï¼š</label>
              <input type="text" class="form-control" name="qq" placeholder="è¯·è¾“å…¥QQå·ç "/>
          </div>

          <div class="form-group">
              <label for="email">Emailï¼š</label>
              <input type="text" class="form-control" name="email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€"/>
          </div>

          <div class="form-group" style="text-align: center">
              <input class="btn btn-primary" type="submit" value="æäº¤" />
              <input class="btn btn-default" type="reset" value="é‡ç½®" />
              <input class="btn btn-default" type="button" value="è¿”å›" />
          </div>
      </form>
  </div>
  </body>
  </html>
  ```

* ## ğŸŒweb>>>ğŸ“‘index.jsp

  ```html
  <%@ page import="java.sql.DriverManager" %>
  <%@ page import="java.sql.ResultSet" %>
  <%@ page import="java.sql.Connection" %>
  <%@ page import="java.sql.Statement" %>
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <html lang="zh-CN">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>é¦–é¡µ</title>

    <!-- 1. å¯¼å…¥CSSçš„å…¨å±€æ ·å¼ -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- 2. jQueryå¯¼å…¥ï¼Œå»ºè®®ä½¿ç”¨1.9ä»¥ä¸Šçš„ç‰ˆæœ¬ -->
    <script src="js/jquery-2.1.0.min.js"></script>
    <!-- 3. å¯¼å…¥bootstrapçš„jsæ–‡ä»¶ -->
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
    </script>
  </head>
  <body>
  <div>${user.name}ï¼Œæ¬¢è¿æ‚¨ï¼</div>
  <div align="center">
    <%
      try {
        Class.forName("com.mysql.cj.jdbc.Driver");  //é©±åŠ¨ç¨‹åºå
        String url = "jdbc:mysql://localhost:3306/day17?useSSL=true&characterEncoding=utf-8&serverTimezone=GMT"; //æ•°æ®åº“å
        String username = "root";  //æ•°æ®åº“ç”¨æˆ·å
        String password = "123456";  //æ•°æ®åº“ç”¨æˆ·å¯†ç 
        Connection conn = DriverManager.getConnection(url, username, password);  //è¿æ¥çŠ¶æ€
        if(conn != null){
          out.print("æ•°æ®åº“è¿æ¥æˆåŠŸï¼");
          out.print("<br />");
          Statement stmt = null;
          ResultSet rs = null;
          String sql = "select *from user";  //æŸ¥è¯¢è¯­å¥
          stmt = conn.createStatement();
          rs = stmt.executeQuery(sql);
          out.print("æŸ¥è¯¢ç»“æœï¼š");
          out.print("<br/>");
          out.println("name");
          out.print("<br/>");
          while (rs.next()) {
            out.println(rs.getString("name")); //å°†æŸ¥è¯¢ç»“æœè¾“å‡º
            out.print("<br/>");
          }
        }
        else{
          out.print("è¿æ¥å¤±è´¥ï¼");
          out.print("<br/>");
        }
      }catch (Exception e) {
        out.print("æ•°æ®åº“è¿æ¥å¼‚å¸¸ï¼");
        out.print("<br/>");
      }
    %>
    <a href="${pageContext.request.contextPath}/findUserByPageServlet" style="text-decoration:none;font-size:33px">æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
    </a>
  </div>
  </body>
  </html>
  ```
* ## ğŸŒweb>>>ğŸ“‘list.jsp

  ```html
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

  <!DOCTYPE html>
  <!-- ç½‘é¡µä½¿ç”¨çš„è¯­è¨€ -->
  <html lang="zh-CN">
  <head>
      <!-- æŒ‡å®šå­—ç¬¦é›† -->
      <meta charset="utf-8">
      <!-- ä½¿ç”¨Edgeæœ€æ–°çš„æµè§ˆå™¨çš„æ¸²æŸ“æ–¹å¼ -->
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- viewportè§†å£ï¼šç½‘é¡µå¯ä»¥æ ¹æ®è®¾ç½®çš„å®½åº¦è‡ªåŠ¨è¿›è¡Œé€‚é…ï¼Œåœ¨æµè§ˆå™¨çš„å†…éƒ¨è™šæ‹Ÿä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨çš„å®½åº¦ä¸è®¾å¤‡çš„å®½åº¦ç›¸åŒã€‚
      width: é»˜è®¤å®½åº¦ä¸è®¾å¤‡çš„å®½åº¦ç›¸åŒ
      initial-scale: åˆå§‹çš„ç¼©æ”¾æ¯”ï¼Œä¸º1:1 -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- ä¸Šè¿°3ä¸ªmetaæ ‡ç­¾*å¿…é¡»*æ”¾åœ¨æœ€å‰é¢ï¼Œä»»ä½•å…¶ä»–å†…å®¹éƒ½*å¿…é¡»*è·Ÿéšå…¶åï¼ -->
      <title>ç”¨æˆ·ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</title>

      <!-- 1. å¯¼å…¥CSSçš„å…¨å±€æ ·å¼ -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <!-- 2. jQueryå¯¼å…¥ï¼Œå»ºè®®ä½¿ç”¨1.9ä»¥ä¸Šçš„ç‰ˆæœ¬ -->
      <script src="js/jquery-2.1.0.min.js"></script>
      <!-- 3. å¯¼å…¥bootstrapçš„jsæ–‡ä»¶ -->
      <script src="js/bootstrap.min.js"></script>
      <style type="text/css">
          td, th {
              text-align: center;
          }
      </style>
      <script>
          function deleteUser(id){
              //ç”¨æˆ·å®‰å…¨æç¤º
              if (confirm("æ‚¨ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ")){
                  //è®¿é—®è·¯å¾„
                  location.href="${pageContext.request.contextPath}/delUserServlet?id="+id;
              }
          }
          window.onload = function(){
              //ç»™åˆ é™¤é€‰ä¸­æŒ‰é’®æ·»åŠ å•å‡»äº‹ä»¶
              document.getElementById("delSelected").onclick = function(){
                  if(confirm("æ‚¨ç¡®å®šè¦åˆ é™¤é€‰ä¸­æ¡ç›®å—ï¼Ÿ")){
                      var flag = false;
                      //åˆ¤æ–­æ˜¯å¦æœ‰é€‰ä¸­æ¡ç›®
                      var cbs = document.getElementsByName("uid");
                      for (var i = 0; i < cbs.length; i++) {
                          if(cbs[i].checked){
                              //æœ‰ä¸€ä¸ªæ¡ç›®é€‰ä¸­äº†
                              flag = true;
                              break;
                          }
                      }
                      if(flag){//æœ‰æ¡ç›®è¢«é€‰ä¸­
                          //è¡¨å•æäº¤
                          document.getElementById("form").submit();
                      }
                  }
              }
              //1.è·å–ç¬¬ä¸€ä¸ªcb
              document.getElementById("firstCb").onclick = function(){
                  //2.è·å–ä¸‹è¾¹åˆ—è¡¨ä¸­æ‰€æœ‰çš„cb
                  var cbs = document.getElementsByName("uid");
                  //3.éå†
                  for (var i = 0; i < cbs.length; i++) {
                      //4.è®¾ç½®è¿™äº›cbs[i]çš„checkedçŠ¶æ€ = firstCb.checked
                      cbs[i].checked = this.checked;
                  }
              }
          }
      </script>
  </head>
  <body>
  <div class="container">
      <h3 style="text-align: center">ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨</h3>
      <div style="float: left">
          <form class="form-inline" action="${pageContext.request.contextPath}/findUserByPageServlet" method="post">
              <div class="form-group">
                  <label for="exampleInputName2">å§“å</label>
                  <input type="text" name="name" value="${condition.name[0]}" class="form-control" id="exampleInputName2">
              </div>
              <div class="form-group">
                  <label for="exampleInputName3">ç±è´¯</label>
                  <input type="text" name="address" value="${condition.adress[0]}"  class="form-control" id="exampleInputName3" >
              </div>
              <div class="form-group">
                  <label for="exampleInputEmail2">é‚®ç®±</label>
                  <input type="email" name="emmail" value="${condition.email[0]}"  class="form-control" id="exampleInputEmail2" >
              </div>
              <button type="submit" class="btn btn-default">æŸ¥è¯¢</button>
          </form>
      </div>
      <div style="float: right;margin: 5px">
          <a class="btn btn-primary" href="${pageContext.request.contextPath}/add.jsp">æ·»åŠ è”ç³»äºº</a>
          <a class="btn btn-primary" href="javascript:void(0);" id="delSelected">åˆ é™¤é€‰ä¸­</a>
      </div>
      <form action="${pageContext.request.contextPath}/delSelectedServlet" method="post" id="form">
      <table border="1" class="table table-bordered table-hover">

          <tr class="success">
              <th><input type="checkbox" id="firstCb"></th>
              <th>ç¼–å·</th>
              <th>å§“å</th>
              <th>æ€§åˆ«</th>
              <th>å¹´é¾„</th>
              <th>ç±è´¯</th>
              <th>QQ</th>
              <th>é‚®ç®±</th>
              <th>æ“ä½œ</th>
          </tr>
          <c:forEach items="${pb.list}" var="user" varStatus="s">
              <tr>
                  <th><input type="checkbox" name="uid" value="${user.id}"></th>
                  <td>${s.count}</td>
                  <td>${user.name}</td>
                  <td>${user.gender}</td>
                  <td>${user.age}</td>
                  <td>${user.address}</td>
                  <td>${user.qq}</td>
                  <td>${user.email}</td>
                  <td><a class="btn btn-default btn-sm" href="${pageContext.request.contextPath}/findUserServlet?id=${user.id}">ä¿®æ”¹</a>&nbsp;
                      <a class="btn btn-default btn-sm" href="javascript:deleteUser(${user.id});">åˆ é™¤</a></td>
              </tr>
          </c:forEach>

      </table>
      </form>
      <div>
          <nav aria-label="Page navigation">
              <ul class="pagination">
                  <c:if test="${pb.currentPage == 1}">
                      <li class="disabled">
                  </c:if>
                  <c:if test="${pb.currentPage != 1}">
                      <li>
                  </c:if>
                  <li>
                      <a href="${pageContext.request.contextPath}/findUserByPageServlet?currentPage=${pb.currentPage-1}
                      &rows=5&name=${condition.name[0]}&address=${condition.address[0]}&email=${condition.email[0]} " aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                      </a>
                  </li>
                  <c:forEach begin="1" end="${pb.totalPage}" var="i">
                      <c:if test="${pb.currentPage==i}">
                          <li class="active"><a href="${pageContext.request.contextPath}/findUserByPageServlet?currentPage=${i}
                          &rows=5&name=${condition.name[0]}&address=${condition.address[0]}&email=${condition.email[0]}">${i}</a></li>
                      </c:if>
                      <c:if test="${pb.currentPage!=i}">
                          <li><a href="${pageContext.request.contextPath}/findUserByPageServlet?currentPage=${i}
                          &rows=5&name=${condition.name[0]}&address=${condition.address[0]}&email=${condition.email[0]}">${i}</a></li>
                      </c:if>
                  </c:forEach>
                  <li>
                      <a href="${pageContext.request.contextPath}/findUserByPageServlet?currentPage=${pb.currentPage+1}
                      &rows=5&name=${condition.name[0]}&address=${condition.address[0]}&email=${condition.email[0]}" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                      </a>
                  </li>
                  <span style="font-size:25px;margin-left: 5px ">
                      å…±${pb.totalCount}æ¡è®°å½•ï¼Œå…±${pb.totalPage}é¡µ
                  </span>
              </ul>
          </nav>
      </div>
  </div>
  </body>
  </html>
  ```

* ## ğŸŒweb>>>ğŸ“‘login.jsp

  ```html
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <!DOCTYPE html>
  <html lang="zh-CN">
    <head>
      <meta charset="utf-8"/>
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
      <meta name="viewport" content="width=device-width, initial-scale=1"/>
      <title>ç®¡ç†å‘˜ç™»å½•</title>

      <!-- 1. å¯¼å…¥CSSçš„å…¨å±€æ ·å¼ -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <!-- 2. jQueryå¯¼å…¥ï¼Œå»ºè®®ä½¿ç”¨1.9ä»¥ä¸Šçš„ç‰ˆæœ¬ -->
      <script src="js/jquery-2.1.0.min.js"></script>
      <!-- 3. å¯¼å…¥bootstrapçš„jsæ–‡ä»¶ -->
      <script src="js/bootstrap.min.js"></script>
      <script type="text/javascript">
  		//åˆ‡æ¢éªŒè¯ç 
  		function refreshCode(){
  			//1.è·å–éªŒè¯ç å›¾ç‰‡å±æ€§
  			var vcode=document.getElementById("vcode");
  			//2.è®¾ç½®srcå±æ€§ï¼ŒåŠ ä¸Šæ—¶é—´æˆ³
  			vcode.src="${pageContext.request.contextPath}/checkCodeServlet?time="+new Date().getTime();
  		}
      </script>
    </head>
    <body>
    	<div class="container" style="width: 400px;">
    		<h3 style="text-align: center;">ç®¡ç†å‘˜ç™»å½•</h3>
  		<!-- å‡ºé”™æ˜¾ç¤ºçš„ä¿¡æ¯æ¡† -->
  		<div class="alert alert-warning alert-dismissible" role="alert">
  			<button type="button" class="close" data-dismiss="alert" >
  				<span>&times;</span></button>
  			<strong>${login_msg}</strong>
  		</div>
          <form action="${pageContext.request.contextPath}/loginServlet" method="post">
  	      <div class="form-group">
  	        <label for="user">ç”¨æˆ·åï¼š</label>
  	        <input type="text" name="username" class="form-control" id="user" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"/>
  	      </div>
  	  
  	      <div class="form-group">
  	        <label for="password">å¯†ç ï¼š</label>
  	        <input type="password" name="password" class="form-control" id="password" placeholder="è¯·è¾“å…¥å¯†ç "/>
  	      </div>
  	  
  	      <div class="form-inline">
  	        <label for="vcode">éªŒè¯ç ï¼š</label>
  	        <input type="text" name="verifycode" class="form-control" id="verifycode" placeholder="è¯·è¾“å…¥éªŒè¯ç " style="width: 120px;"/>
  	        <a href="javascript:refreshCode()"><img src="${pageContext.request.contextPath}/checkCodeServlet"
  													title="çœ‹ä¸æ¸…ç‚¹å‡»åˆ·æ–°" id="vcode"/></a>
  	      </div>
  	      <hr/>
  	      <div class="form-group" style="text-align: center;">
  	        <input class="btn btn btn-primary" type="submit" value="ç™»å½•">
  	       </div>
  	  	</form>
    	</div>
    </body>
  </html>
  ```

* ## ğŸŒweb>>>ğŸ“‘update.jsp

  ```html
  <%@ page contentType="text/html;charset=UTF-8" language="java" %>
  <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
  <!DOCTYPE html>
  <!-- ç½‘é¡µä½¿ç”¨çš„è¯­è¨€ -->
  <html lang="zh-CN">
      <head>
          <!-- æŒ‡å®šå­—ç¬¦é›† -->
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <title>ä¿®æ”¹ç”¨æˆ·</title>

          <link href="css/bootstrap.min.css" rel="stylesheet">
          <script src="js/jquery-2.1.0.min.js"></script>
          <script src="js/bootstrap.min.js"></script>
      
      </head>
      <body>
          <div class="container" style="width: 400px;">
          <h3 style="text-align: center;">ä¿®æ”¹è”ç³»äºº</h3>
              <form action="${pageContext.request.contextPath}/updateUserServlet" method="post">
              <input type="hidden" name="id" value="${user.id}">
            <div class="form-group">
              <label for="name">å§“åï¼š</label>
              <input type="text" class="form-control" id="name" name="name" value="${user.name}" readonly="readonly" placeholder="è¯·è¾“å…¥å§“å" />
            </div>

            <div class="form-group">
              <label>æ€§åˆ«ï¼š</label>
                <c:if test="${user.gender == 'ç”·'}">
                    <input type="radio" name="gender" value="ç”·"  checked/>ç”·
                    <input type="radio" name="gender" value="å¥³"  />å¥³
                </c:if>
                <c:if test="${user.gender == 'å¥³'}">
                    <input type="radio" name="gender" value="ç”·"  />ç”·
                    <input type="radio" name="gender" value="å¥³"  checked/>å¥³
                </c:if>
            </div>

            <div class="form-group">
              <label for="age">å¹´é¾„ï¼š</label>
              <input type="text" class="form-control" id="age" value="${user.age}" name="age" placeholder="è¯·è¾“å…¥å¹´é¾„" />
            </div>

            <div class="form-group">
              <label for="address">ç±è´¯ï¼š</label>
               <select name="address" class="form-control" id="address">
                   <c:if test="${user.address == 'å¹¿ä¸œ'}">
                       <option value="å¹¿ä¸œ" selected>å¹¿ä¸œ</option>
                       <option value="å¹¿è¥¿">å¹¿è¥¿</option>
                       <option value="æ¹–å—">æ¹–å—</option>
                   </c:if>
                   <c:if test="${user.address == 'å¹¿è¥¿'}">
                       <option value="å¹¿ä¸œ" >å¹¿ä¸œ</option>
                       <option value="å¹¿è¥¿" selected>å¹¿è¥¿</option>
                       <option value="æ¹–å—">æ¹–å—</option>
                   </c:if>
                   <c:if test="${user.address == 'æ¹–å—'}">
                       <option value="å¹¿ä¸œ" >å¹¿ä¸œ</option>
                       <option value="å¹¿è¥¿">å¹¿è¥¿</option>
                       <option value="æ¹–å—" selected>æ¹–å—</option>
                   </c:if>
              </select>
            </div>

            <div class="form-group">
              <label for="qq">QQï¼š</label>
              <input type="text" value="${user.qq}" class="form-control" name="qq" placeholder="è¯·è¾“å…¥QQå·ç "/>
            </div>

            <div class="form-group">
              <label for="email">Emailï¼š</label>
              <input type="text" value="${user.email}" class="form-control" name="email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€"/>
            </div>

               <div class="form-group" style="text-align: center">
                  <input class="btn btn-primary" type="submit" value="æäº¤" />
                  <input class="btn btn-default" type="reset" value="é‡ç½®" />
                  <input class="btn btn-default" type="button" value="è¿”å›"/>
               </div>
          </form>
          </div>
      </body>
  </html>
  ```
